<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">

  <title>Blockchain basics - Merkle tree</title>
  <meta property="og:title" content="Blockchain basics - Merkle tree" />
  <meta name="twitter:title" content="Blockchain basics - Merkle tree" />
  <meta name="description" content="All the transactions that ever happened in a bitcoin are stored in the distributed database.
- Does it mean that a participant has to manage a very large database?
- Does it mean that to verify if a transaction is valid, one has to process all the data from the very beginning?
Answer lies in Merkle tree and this article is to touch on few basics.
Merkle tree “In cryptography and computer science, a hash tree or Merkle tree is a tree in which every non-leaf node is labelled with the hash of the labels or values (in case of leaves) of its child nodes.">
  <meta property="og:description" content="All the transactions that ever happened in a bitcoin are stored in the distributed database.
- Does it mean that a participant has to manage a very large database?
- Does it mean that to verify if a transaction is valid, one has to process all the data from the very beginning?
Answer lies in Merkle tree and this article is to touch on few basics.
Merkle tree “In cryptography and computer science, a hash tree or Merkle tree is a tree in which every non-leaf node is labelled with the hash of the labels or values (in case of leaves) of its child nodes.">
  <meta name="twitter:description" content="All the transactions that ever happened in a bitcoin are stored in the distributed database.
- Does it mean that a participant has to manage a very large database?
- Does it mean that to verify if a …">
  <meta name="author" content=""/>
  <meta name="twitter:card" content="summary" />
  <meta property="og:url" content="http://govidat.github.io/blog/post/blockchain-basics-merkle-tree/" />
  <meta property="og:type" content="website" />
  <meta property="og:site_name" content="Blog" />

  <meta name="generator" content="Hugo 0.23" />
  <link rel="canonical" href="http://govidat.github.io/blog/post/blockchain-basics-merkle-tree/" />
  <link rel="alternate" href="http://govidat.github.io/blog/index.xml" type="application/rss+xml" title="Blog">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.7.1/katex.min.css" integrity="sha384-wITovz90syo1dJWVh32uuETPVEtGigN07tkttEqPv+uR2SE/mbQcG7ATL28aI9H0" crossorigin="anonymous">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" />
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
  <link rel="stylesheet" href="http://govidat.github.io/blog/css/main.css" />
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic" />
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" />
  <link rel="stylesheet" href="http://govidat.github.io/blog/css/pygment_highlights.css" />
  <link rel="stylesheet" href="http://govidat.github.io/blog/css/highlight.min.css" />


<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.1/photoswipe.min.css" integrity="sha256-sCl5PUOGMLfFYctzDW3MtRib0ctyUvI9Qsmq2wXOeBY=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.1/default-skin/default-skin.min.css" integrity="sha256-BFeI1V+Vh1Rk37wswuOYn5lsTcaU96hGaI7OUVCLjPc=" crossorigin="anonymous" />



<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

<div class="pswp__bg"></div>

<div class="pswp__scroll-wrap">
    
    <div class="pswp__container">
      <div class="pswp__item"></div>
      <div class="pswp__item"></div>
      <div class="pswp__item"></div>
    </div>
    
    <div class="pswp__ui pswp__ui--hidden">
    <div class="pswp__top-bar">
      
      <div class="pswp__counter"></div>
      <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
      <button class="pswp__button pswp__button--share" title="Share"></button>
      <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
      <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
      
      
      <div class="pswp__preloader">
        <div class="pswp__preloader__icn">
          <div class="pswp__preloader__cut">
            <div class="pswp__preloader__donut"></div>
          </div>
        </div>
      </div>
    </div>
    <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
      <div class="pswp__share-tooltip"></div>
    </div>
    <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
    </button>
    <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
    </button>
    <div class="pswp__caption">
      <div class="pswp__caption__center"></div>
    </div>
    </div>
    </div>
</div>

</head>

  <body>
    <nav class="navbar navbar-default navbar-fixed-top navbar-custom">
  <div class="container-fluid">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#main-navbar">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="http://govidat.github.io/blog/">Blog</a>
    </div>

    <div class="collapse navbar-collapse" id="main-navbar">
      <ul class="nav navbar-nav navbar-right">
        

        

        
      </ul>
    </div>

    <div class="avatar-container">
      <div class="avatar-img-border">
        
      </div>
    </div>

  </div>
</nav>




    
  
  
  




  

  <header class="header-section ">
    
    <div class="intro-header no-img">
      
      <div class="container">
        <div class="row">
          <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
            <div class="post-heading">
              <h1>Blockchain basics - Merkle tree</h1>
                
                
                  <span class="post-meta">
  Posted on July 12, 2017
  
</span>


                
            </div>
          </div>
        </div>
      </div>
    </div>
  </header>


    
<div class="container" role="main">
  <div class="row">
    <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
      <article role="main" class="blog-post">
        

<p><img src="/blog/img/image9.png" alt="Merkle tree" /></p>

<p>All the transactions that ever happened in a bitcoin are stored in the distributed database.<br />
- Does it mean that a participant has to manage a very large database?<br />
- Does it mean that to verify if a transaction is valid, one has to process all the data from the very beginning?</p>

<p>Answer lies in Merkle tree and this article is to touch on few basics.</p>

<h2 id="merkle-tree">Merkle tree</h2>

<p>“In cryptography and computer science, a hash tree or Merkle tree is a tree in which every non-leaf node is labelled with the hash of the labels or values (in case of leaves) of its child nodes.” <a href="https://en.wikipedia.org/wiki/Merkle_tree">Wiki Link</a></p>

<p>In the above diagram, the transactions are at the leaf level. Hash of two transactions (Tx0 and Tx1) are again hashed and a non-leaf node of Hash01 is formed. Similarly Hash23, Hash45 etc are formed. A tree is formed and at the top of the tree is the Top Hash or the Root Hash.</p>

<p>In bitcoin the Block header contains this Root as Merkle Root.</p>

<p><img src="/blog/img/image10.png" alt="Merkle root" /><br />
Source: <a href="https://bitcoin.org/bitcoin.pdf">Bitcoin paper</a></p>

<p>With this design, they have greatly reduced the size of the blocks that are required for a transaction user.</p>

<p>As mentioned in the paper - “A block header with no transactions would be about 80 bytes. If we suppose blocks are generated every 10 minutes, 80 bytes * 6 * 24 * 365 = 4.2MB per year. With computer systems typically selling with 2GB of RAM as of 2008, and Moore&rsquo;s Law predicting current growth of 1.2GB per year, storage should not be a problem even if the block headers must be kept in memory.”</p>

<h2 id="verification-simplicity">Verification simplicity</h2>

<p>To verify that a transaction is part of a block )or a hash tree), one needs the specific transaction details and just the hash values of the higher level non branches.</p>

<p><img src="/blog/img/image11.png" alt="Verification" /></p>

<p>To verify that Tx0 is in the block, one needs the details of<br />
- Tx0<br />
- Hash1 and<br />
- Hash23<br />
With this one can quickly recalculate Root Hash and verify that Tx0 is part of this block.</p>

<p>Mathematical explanation as per Wiki:<br />
“Demonstrating that a leaf node is a part of the given hash tree requires processing an amount of data proportional to the logarithm of the number of nodes of the tree.”</p>

<h2 id="reclaiming-disk-space">Reclaiming Disk Space</h2>

<p>In the bitcoin world, the spent transactions can be discarded to save space. Merkle tree enables this without breaking the block’s hash. The image below shows the pruning after removing Tx0, Tx1 and Tx2.</p>

<p><img src="/blog/img/image12.png" alt="Pruning" /><br />
Source: <a href="https://bitcoin.org/bitcoin.pdf">Bitcoin paper</a></p>

<h3 id="related-article">Related article</h3>

<p><a href="https://www.linkedin.com/pulse/blockchain-basics-business-govindarajan-r">Blockchain basics</a><br />
<a href="https://www.linkedin.com/pulse/cryptography-basics-blockchain-govindarajan-r">Blockchain basics - cryptography</a></p>

      </article>

      <ul class="pager blog-pager">
        
          <li class="previous">
            <a href="http://govidat.github.io/blog/post/blockchain-basics-cryptography/" data-toggle="tooltip" data-placement="top" title="Blockchain basics - cryptography">&larr; Previous Post</a>
          </li>
        
        
      </ul>

      

    </div>
  </div>
</div>

    <footer>
  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <ul class="list-inline text-center footer-links">
          
          
        </ul>
        <p class="credits copyright text-muted">
          
          &nbsp;&bull;&nbsp;
          2017

          
            &nbsp;&bull;&nbsp;
            <a href="http://govidat.github.io/blog/">Blog</a>
          
        </p>
        
        <p class="credits theme-by text-muted">
          <a href="http://gohugo.io">Hugo v0.23</a> powered &nbsp;&bull;&nbsp; Theme by <a href="http://deanattali.com/beautiful-jekyll/">Beautiful Jekyll</a> adapted to <a href="https://github.com/halogenica/beautifulhugo">Beautiful Hugo</a>
          
        </p>
      </div>
    </div>
  </div>
</footer>

<script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.7.1/katex.min.js" integrity="sha384-/y1Nn9+QQAipbNQWU65krzJralCnuOasHncUFXGkdwntGeSvQicrYkiUBwsgUqc1" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.7.1/contrib/auto-render.min.js" integrity="sha384-dq1/gEHSxPZQ7DdrM82ID4YVol9BYyU7GbWlIwnwyPzotpoc57wDw/guX8EaYGPx" crossorigin="anonymous"></script>
<script src="https://code.jquery.com/jquery-1.12.4.min.js" integrity="sha256-ZosEbRLbNQzLpnKIkEdrPv7lOy9C27hHQ+Xp8a4MxAQ=" crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
<script src="http://govidat.github.io/blog/js/main.js"></script>
<script src="http://govidat.github.io/blog/js/highlight.min.js"></script>
<script> hljs.initHighlightingOnLoad(); </script>
<script> renderMathInElement(document.body); </script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.1/photoswipe.min.js" integrity="sha256-UplRCs9v4KXVJvVY+p+RSo5Q4ilAUXh7kpjyIP5odyc=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.1/photoswipe-ui-default.min.js" integrity="sha256-PWHOlUzc96pMc8ThwRIXPn8yH4NOLu42RQ0b9SpnpFk=" crossorigin="anonymous"></script>
<script src="/js/load-photoswipe.js"></script>



  </body>
</html>

